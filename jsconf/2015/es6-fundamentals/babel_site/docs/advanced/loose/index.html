<!DOCTYPE html>
<html lang="en"  class="no-js">

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Loose mode · Babel</title>
  <meta name="description" content="The compiler for writing next generation JavaScript">

  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link rel="stylesheet" href="/css/main.css?t=2015-05-27T15:59:04-04:00">
  <link rel="canonical" href="https://babeljs.io/docs/advanced/loose/">
  <link rel="alternate" type="application/rss+xml" title="Babel" href="https://babeljs.io/feed.xml" />

  <link rel="icon" href="/favicon.ico" type="image/x-icon">

  <link rel="apple-touch-icon" href="/apple-touch-icon.png">

  <link rel="icon" type="image/png" href="/favicon-192x192.png" sizes="192x192">
  <link rel="icon" type="image/png" href="/favicon-160x160.png" sizes="160x160">
  <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
  <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
  <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
  <meta name="msapplication-TileColor" content="#da532c">
  <meta name="msapplication-TileImage" content="/mstile-144x144.png">

  <meta name="og:url" content="https://babeljs.io/">
  <meta name="og:image" content="website">
  <meta name="og:title" content="Loose mode · Babel">
  <meta name="og:description" content="The compiler for writing next generation JavaScript">
  <meta name="og:image" content="https://babeljs.io/images/share-image.png">

  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@babeljs">
  <meta name="twitter:title" content="Loose mode · Babel">
  <meta name="twitter:description" content="The compiler for writing next generation JavaScript">
  <meta name="twitter:image:src" content="https://babeljs.io/images/share-image.png">
  <meta name="twitter:url" content="https://babeljs.io/docs/advanced/loose/">

  <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/lodash.js/2.4.1/lodash.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.1/js/bootstrap.min.js"></script>
  <script>$("html").removeClass("no-js").addClass("js");</script>
</head>


  <body>

    <nav role="navigation" id="header" class="navbar navbar-default navbar-fixed-top">
  <div class="container">
    <div class="navbar-header">
      <button type="button" data-toggle="collapse" data-target="#navigation" class="navbar-toggle collapsed">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a href="/" class="navbar-brand logo">Babel</a>
    </div>
    <div id="navigation" class="collapse navbar-collapse">
      <ul class="nav navbar-nav">
        
          
            <li >
              <a href="/docs/learn-es2015/">Learn ES2015</a>
            </li>
          
        
          
            <li >
              <a href="/docs/setup/">Setup</a>
            </li>
          
        
          
            <li class="dropdown ">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Usage <span class="caret"></span></a>
              <ul class="dropdown-menu" role="menu">
                
                  <li >
                    <a href="/docs/usage/options/">Options</a>
                  </li>
                
                  <li >
                    <a href="/docs/usage/babelrc/">babelrc</a>
                  </li>
                
                  <li >
                    <a href="/docs/usage/cli/">CLI</a>
                  </li>
                
                  <li >
                    <a href="/docs/usage/require/">Require Hook</a>
                  </li>
                
                  <li >
                    <a href="/docs/usage/api/">API</a>
                  </li>
                
                  <li >
                    <a href="/docs/usage/polyfill/">Polyfill</a>
                  </li>
                
                  <li >
                    <a href="/docs/usage/runtime/">Runtime</a>
                  </li>
                
                  <li >
                    <a href="/docs/usage/modules/">Modules</a>
                  </li>
                
                  <li >
                    <a href="/docs/usage/experimental/">Experimental</a>
                  </li>
                
                  <li >
                    <a href="/docs/usage/browser/">Browser</a>
                  </li>
                
                  <li >
                    <a href="/docs/usage/jsx/">JSX</a>
                  </li>
                
              </ul>
            </li>
          
        
          
            <li class="dropdown ">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Advanced <span class="caret"></span></a>
              <ul class="dropdown-menu" role="menu">
                
                  <li >
                    <a href="/docs/advanced/plugins/">Plugins</a>
                  </li>
                
                  <li >
                    <a href="/docs/advanced/transformers/">Transformers</a>
                  </li>
                
                  <li >
                    <a href="/docs/advanced/caveats/">Caveats</a>
                  </li>
                
                  <li class="active">
                    <a href="/docs/advanced/loose/">Loose mode</a>
                  </li>
                
                  <li >
                    <a href="/docs/advanced/external-helpers/">External helpers</a>
                  </li>
                
              </ul>
            </li>
          
        
          
            <li >
              <a href="/repl/">Try it out</a>
            </li>
          
        
          
            <li >
              <a href="/docs/faq/">FAQ</a>
            </li>
          
        
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li><a href="https://gitter.im/babel/babel">Support</a></li>
        <li >
          <a href="/blog/">Blog</a>
        </li>
        <li>
          <a href="https://twitter.com/babeljs">Twitter</a>
        </li>
        <li>
          <a href="https://github.com/babel/babel">GitHub</a>
        </li>
      </ul>
    </div>
  </div>
</nav>


    <div class="docs-header">
  <div class="container">
    <div class="row">
      <div class="col-md-12">
        <h1>Loose mode</h1>
        <p>Making your code faster (but less spec-compliant)</p>
      </div>
    </div>
  </div>
</div>

<div class="container">
  <div class="row">
    <div class="col-md-9 docs-content">
      <p>Loose mode enables certain transformers to generate cleaner output that lacks
specific ES6 edgecases. These edgecases are either unlikely to appear in your
code or the inclusion of them introduces significant overhead.</p>

<p>As a result of loose mode code will execute faster and be much more readable and
comparable to the original but will deviate from the spec in slight ways.</p>

<blockquote class="babel-callout babel-callout-warning">
  <h4>WARNING</h4>
  <p>
    Please be aware of <strong>all</strong> possible caveats when enabling loose mode.
  </p>
</blockquote>

<h2 id="usage">Usage</h2>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">require</span><span class="p">(</span><span class="s2">&quot;babel&quot;</span><span class="p">).</span><span class="nx">transform</span><span class="p">(</span><span class="s2">&quot;code&quot;</span><span class="p">,</span> <span class="p">{</span> <span class="nx">loose</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;es6.classes&quot;</span><span class="p">,</span> <span class="s2">&quot;es6.properties.computed&quot;</span><span class="p">]</span> <span class="p">});</span>
</code></pre></div><div class="highlight"><pre><code class="language-sh" data-lang="sh"><span class="nv">$ </span>babel --loose es6.classes,es6.properties.computed script.js
</code></pre></div>
<h3 id="all">All</h3>

<p>You can optionally choose to enable fast mode across all transformers instead of
manually specifying each one:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">require</span><span class="p">(</span><span class="s2">&quot;babel&quot;</span><span class="p">).</span><span class="nx">transform</span><span class="p">(</span><span class="s2">&quot;code&quot;</span><span class="p">,</span> <span class="p">{</span> <span class="nx">loose</span><span class="o">:</span> <span class="s2">&quot;all&quot;</span> <span class="p">});</span>
</code></pre></div><div class="highlight"><pre><code class="language-sh" data-lang="sh"><span class="nv">$ </span>babel --loose all script.js
</code></pre></div>
<h2 id="caveats">Caveats</h2>

<h3 id="es6.classes">es6.classes</h3>

<h4 id="method-enumerability">Method enumerability</h4>

<p>Please note that in loose mode class methods <strong>are</strong> enumerable. This is not in line
with the spec and you may run into issues.</p>

<h4 id="method-assignment">Method assignment</h4>

<p>Under loose mode, methods are defined on the class prototype with simple assignments
instead of being defined. This can result in the following not working:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kr">class</span> <span class="nx">Foo</span> <span class="p">{</span>
  <span class="nx">set</span> <span class="nx">bar</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s2">&quot;foo!&quot;</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="kr">class</span> <span class="nx">Bar</span> <span class="kr">extends</span> <span class="nx">Foo</span> <span class="p">{</span>
  <span class="nx">bar</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// will throw an error when this method is defined</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>When <code>Bar.prototype.foo</code> is defined it triggers the setter on <code>Foo</code>. This is a
case that is very unlikely to appear in production code however it&#39;s something
to keep in mind.</p>

<h3 id="es6.spread">es6.spread</h3>

<p>All iterables are assumed to be arrays.</p>

<h3 id="es6.destructuring">es6.destructuring</h3>

<p>All iterable destructuring are assumed to be arrays.</p>

<h3 id="es6.properties.computed">es6.properties.computed</h3>

<p>Just like method assignment in classes, in loose mode, computed property names
use simple assignments instead of being defined. This is unlikely to be an issue
in production code.</p>

<h3 id="es6.modules">es6.modules</h3>

<p>By default, when using exports with babel a non-enumerable <code>__esModule</code> property
is exported.</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">foo</span> <span class="o">=</span> <span class="nx">exports</span><span class="p">.</span><span class="nx">foo</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>

<span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">exports</span><span class="p">,</span> <span class="s2">&quot;__esModule&quot;</span><span class="p">,</span> <span class="p">{</span>
  <span class="nx">value</span><span class="o">:</span> <span class="kc">true</span>
<span class="p">});</span>
</code></pre></div>
<p>In environments that don&#39;t support this you can enable loose mode on <code>es6.modules</code>
and instead of using <code>Object.defineProperty</code> an assignment will be used instead.</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">foo</span> <span class="o">=</span> <span class="nx">exports</span><span class="p">.</span><span class="nx">foo</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>
<span class="nx">exports</span><span class="p">.</span><span class="nx">__esModule</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
</code></pre></div>
<h3 id="es6.forof">es6.forOf</h3>

<h4 id="abrupt-completions">Abrupt completions</h4>

<p>In loose mode an iterators <code>return</code> method will not be called on abrupt completions caused by thrown errors.</p>

<p>Please see <a href="https://github.com/google/traceur-compiler/issues/1773">google/traceur-compiler#1773</a> and
<a href="https://github.com/babel/babel/issues/838">babel/babel/#838</a> for more information.</p>

<h4 id="arrays">Arrays</h4>

<p>Under loose mode the <code>forOf</code> transformer will output more verbose iteration code.</p>

<p>For example the following:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="nx">of</span> <span class="nx">foo</span><span class="p">)</span> <span class="p">{}</span>
</code></pre></div>
<p>is normally output as:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">_iterator</span> <span class="o">=</span> <span class="nx">foo</span><span class="p">[</span><span class="nx">Symbol</span><span class="p">.</span><span class="nx">iterator</span><span class="p">](),</span> <span class="nx">_step</span><span class="p">;</span> <span class="o">!</span><span class="p">(</span><span class="nx">_step</span> <span class="o">=</span> <span class="nx">_iterator</span><span class="p">.</span><span class="nx">next</span><span class="p">()).</span><span class="nx">done</span><span class="p">;)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="nx">_step</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<p>Under loose mode however it&#39;s output as:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">_iterator</span> <span class="o">=</span> <span class="nx">foo</span><span class="p">,</span> <span class="nx">_isArray</span> <span class="o">=</span> <span class="nb">Array</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">_iterator</span><span class="p">),</span> <span class="nx">_i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">_iterator</span> <span class="o">=</span> <span class="nx">_isArray</span> <span class="o">?</span> <span class="nx">_iterator</span> <span class="o">:</span> <span class="nx">_iterator</span><span class="p">[</span><span class="nx">Symbol</span><span class="p">.</span><span class="nx">iterator</span><span class="p">]();;)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">i</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">_isArray</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">_i</span> <span class="o">&gt;=</span> <span class="nx">_iterator</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">break</span><span class="p">;</span>
    <span class="nx">i</span> <span class="o">=</span> <span class="nx">_iterator</span><span class="p">[</span><span class="nx">_i</span><span class="o">++</span><span class="p">];</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="nx">_i</span> <span class="o">=</span> <span class="nx">_iterator</span><span class="p">.</span><span class="nx">next</span><span class="p">();</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">_i</span><span class="p">.</span><span class="nx">done</span><span class="p">)</span> <span class="k">break</span><span class="p">;</span>
    <span class="nx">i</span> <span class="o">=</span> <span class="nx">_i</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>The result is that arrays are put in a fast path, heavily increasing performance.
All other iterables will continue to work fine but array iteration will be
significantly faster.</p>

<h3 id="es6.templateliterals">es6.templateLiterals</h3>

<p>In loose mode, tagged template literal objects aren&#39;t frozen.</p>

    </div>

    <div class="col-md-3">
      <div class="sidebar">
        <ul class="nav"></ul>
      </div>
    </div>
  </div>
</div>

<script src="/scripts/docs.js?t=2015-05-27T15:59:04-04:00"></script>



    <div class="footer text-center">
  <a href="https://github.com/babel/babel">Babel</a> · v5.4.4
 · Distributed under MIT License
</div>


  </body>

</html>
